/*! (c) Andrea Giammarchi @webreflection ISC */
!function(){var e="function"==typeof Promise?Promise:function(e){var t,n=[],o=0;return e((function(e){t=e,o=1,n.splice(0).forEach(i)})),{then:i};function i(e){return o?setTimeout(e,0,t):n.push(e),this}},t=function(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++)o(e[t])},o=function(e){var t=e.target,n=e.attributeName,o=e.oldValue;t.attributeChangedCallback(n,o,t.getAttribute(n))};return function(i,r){var a=i.constructor.observedAttributes;return a&&e(r).then((function(){new t(n).observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:a});for(var e=0,r=a.length;e<r;e++)i.hasAttribute(a[e])&&o({target:i,attributeName:a[e],oldValue:null})})),i}},n=self,o=n.document,i=n.MutationObserver,r=n.Set,a=n.WeakMap,s=function(e){return"querySelectorAll"in e},l=[].filter,c=function(e){var t=new a,n=function(t){var n=e.query;if(n.length)for(var o=0,i=t.length;o<i;o++)c(l.call(t[o].addedNodes,s),!0,n),c(l.call(t[o].removedNodes,s),!1,n)},c=function n(o,i,a){for(var s,l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r,d=function(d,h,g,m){if(!c.has(h=o[g])){if(c.add(h),i)for(var p,b=u(h),w=0,y=a.length;w<y;w++)b.call(h,p=a[w])&&(t.has(h)||t.set(h,new r),(d=t.get(h)).has(p)||(d.add(p),e.handle(h,i,p)));else t.has(h)&&(d=t.get(h),t.delete(h),d.forEach((function(t){e.handle(h,i,t)})));n(f(h),i,a,c)}s=d,l=h},h=0,g=o.length;h<g;h++)d(s,l,h)},u=function(e){return e.matches||e.webkitMatchesSelector||e.msMatchesSelector},d=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c(t,n,e.query)},f=function(e){return m.length?e.querySelectorAll(m):m},h=new i(n),g=e.root||o,m=e.query;return h.observe(g,{childList:!0,subtree:!0}),d(f(g)),{drop:function(e){for(var n=0,o=e.length;n<o;n++)t.delete(e[n])},flush:function(){n(h.takeRecords())},observer:h,parse:d}},u=self,d=u.document,f=u.Map,h=u.MutationObserver,g=u.Object,m=u.Set,p=u.WeakMap,b=u.Element,w=u.HTMLElement,y=u.Node,v=u.Error,k=u.TypeError,M=u.Reflect,E=self.Promise||e,O=g.defineProperty,x=g.keys,C=g.getOwnPropertyNames,T=g.setPrototypeOf,I=!self.customElements,N=function(e){for(var t=x(e),n=[],o=t.length,i=0;i<o;i++)n[i]=e[t[i]],delete e[t[i]];return function(){for(var i=0;i<o;i++)e[t[i]]=n[i]}};if(I){var R=function(){var e=this.constructor;if(!z.has(e))throw new k("Illegal constructor");var t=z.get(e);if(H)return j(H,t);var n=S.call(d,t);return j(T(n,e.prototype),t)},S=d.createElement,z=new f,F=new f,A=new f,P=new f,L=[],W=c({query:L,handle:function(e,t,n){var o=A.get(n);if(t&&!o.isPrototypeOf(e)){var i=N(e);H=T(e,o);try{new o.constructor}finally{H=null,i()}}var r="".concat(t?"":"dis","connectedCallback");r in o&&e[r]()}}).parse,H=null,q=function(t){if(!F.has(t)){var n,o=new e((function(e){n=e}));F.set(t,{$:o,_:n})}return F.get(t).$},j=t(q,h);O(self,"customElements",{configurable:!0,value:{define:function(e,t){if(P.has(e))throw new v('the name "'.concat(e,'" has already been used with this registry'));z.set(t,e),A.set(e,t.prototype),P.set(e,t),L.push(e),q(e).then((function(){W(d.querySelectorAll(e))})),F.get(e)._(t)},get:function(e){return P.get(e)},whenDefined:q}}),O(R.prototype=w.prototype,"constructor",{value:R}),O(self,"HTMLElement",{configurable:!0,value:R}),O(d,"createElement",{configurable:!0,value:function(e,t){var n=t&&t.is,o=n?P.get(n):P.get(e);return o?new o:S.call(d,e)}}),"isConnected"in y.prototype||O(y.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else try{var D=function e(){return self.Reflect.construct(HTMLLIElement,[],e)};D.prototype=HTMLLIElement.prototype;var V="extends-li";self.customElements.define("extends-li",D,{extends:"li"}),I=d.createElement("li",{is:V}).outerHTML.indexOf(V)<0;var _=self.customElements,B=_.get,U=_.whenDefined;O(self.customElements,"whenDefined",{configurable:!0,value:function(e){var t=this;return U.call(this,e).then((function(n){return n||B.call(t,e)}))}})}catch(e){I=!I}if(I){var K=function(e){var t=Z.get(e);(0,t.parse)(t.root.querySelectorAll(this),e.isConnected)},Y=self.customElements,J=b.prototype.attachShadow,Q=d.createElement,X=Y.define,$=Y.get,G=(M||{construct:function(e){return e.call(this)}}).construct,Z=new p,ee=new m,te=new f,ne=new f,oe=new f,ie=new f,re=[],ae=[],se=function(e){return ie.get(e)||$.call(Y,e)},le=function(e,t,n){var o=oe.get(n);if(t&&!o.isPrototypeOf(e)){var i=N(e);he=T(e,o);try{new o.constructor}finally{he=null,i()}}var r="".concat(t?"":"dis","connectedCallback");r in o&&e[r]()},ce=c({query:ae,handle:le}).parse,ue=c({query:re,handle:function(e,t){Z.has(e)&&(t?ee.add(e):ee.delete(e),ae.length&&K.call(ae,e))}}).parse,de=function(e){if(!ne.has(e)){var t,n=new E((function(e){t=e}));ne.set(e,{$:n,_:t})}return ne.get(e).$},fe=t(de,h),he=null;C(self).filter((function(e){return/^HTML/.test(e)})).forEach((function(e){var t=self[e];function n(){var e=this.constructor;if(!te.has(e))throw new k("Illegal constructor");var n=te.get(e),o=n.is,i=n.tag;if(o){if(he)return fe(he,o);var r=Q.call(d,i);return r.setAttribute("is",o),fe(T(r,e.prototype),o)}return G.call(this,t,[],e)}O(n.prototype=t.prototype,"constructor",{value:n}),O(self,e,{value:n})})),O(d,"createElement",{configurable:!0,value:function(e,t){var n=t&&t.is;if(n){var o=ie.get(n);if(o&&te.get(o).tag===e)return new o}var i=Q.call(d,e);return n&&i.setAttribute("is",n),i}}),J&&O(b.prototype,"attachShadow",{configurable:!0,value:function(){var e=J.apply(this,arguments),t=c({query:ae,root:e,handle:le}),n=t.parse;return Z.set(this,{root:e,parse:n}),e}}),O(Y,"get",{configurable:!0,value:se}),O(Y,"whenDefined",{configurable:!0,value:de}),O(Y,"define",{configurable:!0,value:function(e,t,n){if(se(e))throw new v("'".concat(e,"' has already been defined as a custom element"));var o,i=n&&n.extends;te.set(t,i?{is:e,tag:i}:{is:"",tag:e}),i?(o="".concat(i,'[is="').concat(e,'"]'),oe.set(o,t.prototype),ie.set(e,t),ae.push(o)):(X.apply(Y,arguments),re.push(o=e)),de(e).then((function(){i?(ce(d.querySelectorAll(o)),ee.forEach(K,[o])):ue(d.querySelectorAll(o))})),ne.get(e)._(t)}})}}();var e,t=(function(e){!function(t){if("undefined"!=typeof window){var n,o=0,i=!1,r=!1,a="message".length,s="[iFrameSizer]",l=s.length,c=null,u=window.requestAnimationFrame,d={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},f={},h=null,g={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){E("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}},m={};window.jQuery&&((n=window.jQuery).fn?n.fn.iFrameResize||(n.fn.iFrameResize=function(e){return this.filter("iframe").each((function(t,n){W(n,e)})).end()}):M("","Unable to bind to jQuery, it is not fully loaded.")),e.exports=V(),window.iFrameResize=window.iFrameResize||V()}function p(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function b(e,t,n){e.addEventListener(t,n,!1)}function w(e,t,n){e.removeEventListener(t,n,!1)}function y(e){return s+"["+function(e){var t="Host page: "+e;return window.top!==window.self&&(t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}(e)+"]"}function v(e){return f[e]?f[e].log:i}function k(e,t){O("log",e,t,v(e))}function M(e,t){O("info",e,t,v(e))}function E(e,t){O("warn",e,t,!0)}function O(e,t,n,o){!0===o&&"object"==typeof window.console&&console[e](y(t),n)}function x(e){function t(){i("Height"),i("Width"),A((function(){F(j),R(D),y("onResized",j)}),j,"init")}function n(e){return"border-box"!==e.boxSizing?0:(e.paddingTop?parseInt(e.paddingTop,10):0)+(e.paddingBottom?parseInt(e.paddingBottom,10):0)}function o(e){return"border-box"!==e.boxSizing?0:(e.borderTopWidth?parseInt(e.borderTopWidth,10):0)+(e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0)}function i(e){var t=Number(f[D]["max"+e]),n=Number(f[D]["min"+e]),o=e.toLowerCase(),i=Number(j[o]);k(D,"Checking "+o+" is in range "+n+"-"+t),i<n&&(i=n,k(D,"Set "+o+" to min value")),i>t&&(i=t,k(D,"Set "+o+" to max value")),j[o]=""+i}function r(e){return q.substr(q.indexOf(":")+a+e)}function u(e,t){var n,o,i;n=function(){var n,o;P("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),o=j.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:o.height,iframeWidth:o.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(o.top-n.top,10),offsetLeft:parseInt(o.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),e,t)},o=32,m[i=t]||(m[i]=setTimeout((function(){m[i]=null,n()}),o))}function d(e){var t=e.getBoundingClientRect();return N(D),{x:Math.floor(Number(t.left)+Number(c.x)),y:Math.floor(Number(t.top)+Number(c.y))}}function h(e){var t=e?d(j.iframe):{x:0,y:0},n={x:Number(j.width)+t.x,y:Number(j.height)+t.y};k(D,"Reposition requested from iFrame (offset x:"+t.x+" y:"+t.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](n.x,n.y):E(D,"Unable to scroll to requested position, window.parentIFrame not found"):(c=n,g(),k(D,"--"))}function g(){!1!==y("onScroll",c)?R(D):S()}function p(e){var t={};if(0===Number(j.width)&&0===Number(j.height)){var n=r(9).split(":");t={x:n[1],y:n[0]}}else t={x:j.width,y:j.height};y(e,{iframe:j.iframe,screenX:Number(t.x),screenY:Number(t.y),type:j.type})}function y(e,t){return C(D,e,t)}var v,O,x,T,W,H,q=e.data,j={},D=null;"[iFrameResizerChild]Ready"===q?function(){for(var e in f)P("iFrame requested init",L(e),f[e].iframe,e)}():s===(""+q).substr(0,l)&&q.substr(l).split(":")[0]in f?(x=q.substr(l).split(":"),T=x[1]?parseInt(x[1],10):0,W=f[x[0]]&&f[x[0]].iframe,H=getComputedStyle(W),j={iframe:W,id:x[0],height:T+n(H)+o(H),width:x[2],type:x[3]},D=j.id,f[D]&&(f[D].loaded=!0),(O=j.type in{true:1,false:1,undefined:1})&&k(D,"Ignoring init message from meta parent page"),!O&&function(e){var t=!0;return f[e]||(t=!1,E(j.type+" No settings for "+e+". Message was: "+q)),t}(D)&&(k(D,"Received: "+q),v=!0,null===j.iframe&&(E(D,"IFrame ("+j.id+") not found"),v=!1),v&&function(){var t,n=e.origin,o=f[D]&&f[D].checkOrigin;if(o&&""+n!="null"&&!(o.constructor===Array?function(){var e=0,t=!1;for(k(D,"Checking connection is from allowed list of origins: "+o);e<o.length;e++)if(o[e]===n){t=!0;break}return t}():(t=f[D]&&f[D].remoteHost,k(D,"Checking connection is from: "+t),n===t)))throw new Error("Unexpected message received from: "+n+" for "+j.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(f[D]&&f[D].firstRun&&f[D]&&(f[D].firstRun=!1),j.type){case"close":I(j.iframe);break;case"message":a=r(6),k(D,"onMessage passed: {iframe: "+j.iframe.id+", message: "+a+"}"),y("onMessage",{iframe:j.iframe,message:JSON.parse(a)}),k(D,"--");break;case"mouseenter":p("onMouseEnter");break;case"mouseleave":p("onMouseLeave");break;case"autoResize":f[D].autoResize=JSON.parse(r(9));break;case"scrollTo":h(!1);break;case"scrollToOffset":h(!0);break;case"pageInfo":u(f[D]&&f[D].iframe,D),function(){function e(e,o){function i(){f[n]?u(f[n].iframe,n):t()}["scroll","resize"].forEach((function(t){k(n,e+t+" listener for sendPageInfo"),o(window,t,i)}))}function t(){e("Remove ",w)}var n=D;e("Add ",b),f[n]&&(f[n].stopPageInfo=t)}();break;case"pageInfoStop":f[D]&&f[D].stopPageInfo&&(f[D].stopPageInfo(),delete f[D].stopPageInfo);break;case"inPageLink":n=r(9).split("#")[1]||"",o=decodeURIComponent(n),(i=document.getElementById(o)||document.getElementsByName(o)[0])?(e=d(i),k(D,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),c={x:e.x,y:e.y},g(),k(D,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):k(D,"In page link #"+n+" not found and window.parentIFrame not found"):k(D,"In page link #"+n+" not found");break;case"reset":z(j);break;case"init":t(),y("onInit",j.iframe);break;default:0===Number(j.width)&&0===Number(j.height)?E("Unsupported message received ("+j.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):t()}var e,n,o,i,a}())):M(D,"Ignored: "+q)}function C(e,t,n){var o=null,i=null;if(f[e]){if("function"!=typeof(o=f[e][t]))throw new TypeError(t+" on iFrame["+e+"] is not a function");i=o(n)}return i}function T(e){var t=e.id;delete f[t]}function I(e){var t=e.id;if(!1!==C(t,"onClose",t)){k(t,"Removing iFrame: "+t);try{e.parentNode&&e.parentNode.removeChild(e)}catch(e){E(e)}C(t,"onClosed",t),k(t,"--"),T(e)}else k(t,"Close iframe cancelled by onClose event")}function N(e){null===c&&k(e,"Get page position: "+(c={x:window.pageXOffset!==t?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==t?window.pageYOffset:document.documentElement.scrollTop}).x+","+c.y)}function R(e){null!==c&&(window.scrollTo(c.x,c.y),k(e,"Set page position: "+c.x+","+c.y),S())}function S(){c=null}function z(e){k(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),N(e.id),A((function(){F(e),P("reset","reset",e.iframe,e.id)}),e,"reset")}function F(e){function t(t){r||"0"!==e[t]||(r=!0,k(o,"Hidden iFrame detected, creating visibility listener"),function(){function e(){function e(e){function t(t){return"0px"===(f[e]&&f[e].iframe.style[t])}function n(e){return null!==e.offsetParent}f[e]&&n(f[e].iframe)&&(t("height")||t("width"))&&P("Visibility change","resize",f[e].iframe,e)}Object.keys(f).forEach((function(t){e(t)}))}function t(t){k("window","Mutation observed: "+t[0].target+" "+t[0].type),H(e,16)}function n(){var e=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new o(t).observe(e,n)}var o=p();o&&n()}())}function n(n){!function(t){e.id?(e.iframe.style[t]=e[t]+"px",k(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")):k("undefined","messageData id not set")}(n),t(n)}var o=e.iframe.id;f[o]&&(f[o].sizeHeight&&n("height"),f[o].sizeWidth&&n("width"))}function A(e,t,n){n!==t.type&&u&&!window.jasmine?(k(t.id,"Requesting animation frame"),u(e)):e()}function P(e,t,n,o,i){var r,a=!1;o=o||n.id,f[o]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(r=f[o]&&f[o].targetOrigin,k(o,"["+e+"] Sending msg to iframe["+o+"] ("+t+") targetOrigin: "+r),n.contentWindow.postMessage(s+t,r)):E(o,"["+e+"] IFrame("+o+") not found"),i&&f[o]&&f[o].warningTimeout&&(f[o].msgTimeout=setTimeout((function(){!f[o]||f[o].loaded||a||(a=!0,E(o,"IFrame has not responded within "+f[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),f[o].warningTimeout)))}function L(e){return e+":"+f[e].bodyMarginV1+":"+f[e].sizeWidth+":"+f[e].log+":"+f[e].interval+":"+f[e].enablePublicMethods+":"+f[e].autoResize+":"+f[e].bodyMargin+":"+f[e].heightCalculationMethod+":"+f[e].bodyBackground+":"+f[e].bodyPadding+":"+f[e].tolerance+":"+f[e].inPageLinks+":"+f[e].resizeFrom+":"+f[e].widthCalculationMethod+":"+f[e].mouseEvents}function W(e,n){function r(e){var t=e.split("Callback");if(2===t.length){var n="on"+t[0].charAt(0).toUpperCase()+t[0].slice(1);this[n]=this[e],delete this[e],E(l,"Deprecated: '"+e+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}var a,s,l=function(t){var r;return""===t&&(e.id=(r=n&&n.id||g.id+o++,null!==document.getElementById(r)&&(r+=o++),t=r),i=(n||{}).log,k(t,"Added missing iframe ID: "+t+" ("+e.src+")")),t}(e.id);l in f&&"iFrameResizer"in e?E(l,"Ignored iFrame, already setup."):(function(t){var n;t=t||{},f[l]={firstRun:!0,iframe:e,remoteHost:e.src&&e.src.split("/").slice(0,3).join("/")},function(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}(t),Object.keys(t).forEach(r,t),function(e){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(f[l][t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:g[t])}(t),f[l]&&(f[l].targetOrigin=!0===f[l].checkOrigin?""===(n=f[l].remoteHost)||null!==n.match(/^(about:blank|javascript:|file:\/\/)/)?"*":n:"*")}(n),function(){switch(k(l,"IFrame scrolling "+(f[l]&&f[l].scrolling?"enabled":"disabled")+" for "+l),e.style.overflow=!1===(f[l]&&f[l].scrolling)?"hidden":"auto",f[l]&&f[l].scrolling){case"omit":break;case!0:e.scrolling="yes";break;case!1:e.scrolling="no";break;default:e.scrolling=f[l]?f[l].scrolling:"no"}}(),function(){function t(t){1/0!==f[l][t]&&0!==f[l][t]&&(e.style[t]=f[l][t]+"px",k(l,"Set "+t+" = "+f[l][t]+"px"))}function n(e){if(f[l]["min"+e]>f[l]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!=typeof(f[l]&&f[l].bodyMargin)&&"0"!==(f[l]&&f[l].bodyMargin)||(f[l].bodyMarginV1=f[l].bodyMargin,f[l].bodyMargin=f[l].bodyMargin+"px"),a=L(l),(s=p())&&function(t){e.parentNode&&new t((function(t){t.forEach((function(t){Array.prototype.slice.call(t.removedNodes).forEach((function(t){t===e&&I(e)}))}))})).observe(e.parentNode,{childList:!0})}(s),b(e,"load",(function(){var n,o;P("iFrame.onload",a,e,t,!0),n=f[l]&&f[l].firstRun,o=f[l]&&f[l].heightCalculationMethod in d,!n&&o&&z({iframe:e,height:0,width:0,type:"init"})})),P("init",a,e,t,!0),f[l]&&(f[l].iframe.iFrameResizer={close:I.bind(null,f[l].iframe),removeListeners:T.bind(null,f[l].iframe),resize:P.bind(null,"Window resize","resize",f[l].iframe),moveToAnchor:function(e){P("Move to anchor","moveToAnchor:"+e,f[l].iframe,l)},sendMessage:function(e){P("Send Message","message:"+(e=JSON.stringify(e)),f[l].iframe,l)}}))}function H(e,t){null===h&&(h=setTimeout((function(){h=null,e()}),t))}function q(){"hidden"!==document.visibilityState&&(k("document","Trigger event: Visiblity change"),H((function(){j("Tab Visable","resize")}),16))}function j(e,t){Object.keys(f).forEach((function(n){(function(e){return f[e]&&"parent"===f[e].resizeFrom&&f[e].autoResize&&!f[e].firstRun})(n)&&P(e,t,f[n].iframe,n)}))}function D(){b(window,"message",x),b(window,"resize",(function(){var e;k("window","Trigger event: "+(e="resize")),H((function(){j("Window "+e,"resize")}),16)})),b(document,"visibilitychange",q),b(document,"-webkit-visibilitychange",q)}function V(){function e(e,t){t&&(function(){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}(),W(t,e),n.push(t))}var n;return function(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!u;e+=1)u=window[t[e]+"RequestAnimationFrame"];u?u=u.bind(window):k("setup","RequestAnimationFrame not supported")}(),D(),function(o,i){switch(n=[],function(e){e&&e.enablePublicMethods&&E("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(o),typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),e.bind(t,o));break;case"object":e(o,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return n}}}()}(e={exports:{}},e.exports),e.exports);class n extends HTMLIFrameElement{constructor(e={}){super(),this.version="0.2.3",this._notebookContent="",this.constructorOptions=e}get notebookContent(){return this._notebookContent}set notebookContent(e){this._notebookContent=e}connectedCallback(){var e,n,o,i,r,a,s,l,c,u,d,f,h;this.options=(e=this.constructorOptions,n=this,{src:null!==(i=null!==(o=e.src)&&void 0!==o?o:n.getAttribute("src"))&&void 0!==i?i:"starboard-notebook-iframe-src-not-set",autoResize:null===(r=e.autoResize)||void 0===r||r,inPageLinks:null===(a=e.inPageLinks)||void 0===a||a,sandbox:null!==(l=null!==(s=e.sandbox)&&void 0!==s?s:n.getAttribute("sandbox"))&&void 0!==l?l:"allow-scripts allow-modals allow-same-origin allow-pointer-lock allow-top-navigation-by-user-activation allow-forms allow-downloads",debug:null!==(c=e.debug)&&void 0!==c&&c,onNotebookReadySignalMessage:null!==(u=e.onNotebookReadySignalMessage)&&void 0!==u?u:function(){},onContentUpdateMessage:null!==(d=e.onContentUpdateMessage)&&void 0!==d?d:function(){},onSaveMessage:null!==(f=e.onSaveMessage)&&void 0!==f?f:function(){},onMessage:null!==(h=e.onMessage)&&void 0!==h?h:function(){},notebookContent:e.notebookContent,notebookContainer:e.notebookContainer,notebookVariables:e.notebookVariables});const g=[new URL(this.options.src).origin];this.sandbox.value=this.options.sandbox,this.src=this.options.src,this.frameBorder="0",this.notebookContent=this.options.notebookContent||"",this.notebookVariables=this.options.notebookVariables||{},t({autoResize:this.options.autoResize,inPageLinks:this.options.inPageLinks,checkOrigin:g,log:this.options.debug,onMessage:async e=>{const t=e.message;if("NOTEBOOK_READY_SIGNAL"===t.type){if(this.notebookContent){const e=this.notebookContent,t=this.notebookVariables;this.sendMessage({type:"NOTEBOOK_SET_INIT_DATA",payload:{content:e,variables:t}})}else this.notebookContent=t.payload.content;this.options.onNotebookReadySignalMessage(t.payload)}else"NOTEBOOK_CONTENT_UPDATE"===t.type?(this.notebookContent=t.payload.content,this.options.onContentUpdateMessage(t.payload)):"NOTEBOOK_SAVE_REQUEST"===t.type&&(this.notebookContent=t.payload.content,this.options.onSaveMessage(t.payload));this.options.onMessage(t)},onReady:()=>{}},this)}sendMessage(e){this.iFrameResizer.sendMessage(e)}sendCustomMessage(e){this.sendMessage(e)}dispose(){this.iFrameResizer.close()}}customElements.define("starboard-notebook-iframe",n,{extends:"iframe"});export{n as StarboardNotebookIFrame};
